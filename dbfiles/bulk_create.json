{
    "docs": [
        {
            "publication_date": "2022-04-17T19:15:26.900Z",
            "type": "post",
            "theme": "Deportes",
            "username": "luimorales",
            "title": "Madrid campeón de la liga",
            "body": "Viva el madrid!! Menudo partidazo ayer ante el Espanyol",
            "comments": [
                {
                    "username": "joan_perez",
                    "comment": "Lo jugasteis bien, no se puede negar que es una gran victoria, pero el año que viene la historia será distinta. Visca Espanyol",
                    "publication_date": "2022-04-18T14:56:26.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-04-17T21:14:46.900Z",
            "type": "post",
            "theme": "Deportes",
            "username": "juliGar",
            "title": "Se viene Roland Garros",
            "body": "No puede esperar ya a que llegue junio, aunque por desgracia este año tiene pinta de que va a ganar Djokovic",
            "comments": [
                {
                    "username": "nadal5555",
                    "comment": "Que va jajajaja, este lo vuelve a ganar Nadal",
                    "publication_date": "2022-04-21T19:15:26.900Z"
                },
                {
                    "username": "fofi",
                    "comment": "Yo creo tmb que lo va a ganar Nadal",
                    "publication_date": "2022-04-22T22:13:00.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-04-12T02:47:11.900Z",
            "type": "post",
            "theme": "Deportes",
            "username": "juliGar",
            "title": "Top 3 históricos fútbol",
            "body": "Quienes diriais que es vuestro top 3 históricos? yo creo que Maradona, Messi y Pele",
            "comments": [
                {
                    "username": "cristiano",
                    "comment": "En serio?? Yo cambiaria en el orden a Messi por Pele y metería a Cristiano al mismo nivelque Messi",
                    "publication_date": "2022-04-12T03:33:21.900Z"
                },
                {
                    "username": "becck",
                    "comment": "Es que no tiene nada que ver el fútbol de hace 30 años con el fútbol de hoy, antes no había la preparación para el fútbol que hay ahora. ",
                    "publication_date": "2022-04-17T19:15:26.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-05-01T05:47:11.900Z",
            "type": "post",
            "theme": "Actualidad",
            "username": "manu_gomez",
            "title": "Ya huele a feria",
            "body": "Que alegría volver a pisar el real después de tanto tiempo, aunque se me había olvidado ya el dolor de pies y todo jajajajaaja",
            "comments": [
                {
                    "username": "paloma",
                    "comment": "Había mucho ambiente? Yo no pude ir porque el vuelo no llego a tiempo",
                    "publication_date": "2022-05-01T09:13:51.900Z"
                },
                {
                    "username": "manu_gomez",
                    "comment": "Había más gente que nunca, la verdad",
                    "publication_date": "2022-05-01T11:15:52.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-04-17T13:47:11.900Z",
            "type": "post",
            "theme": "Actualidad",
            "username": "paula_gomez",
            "title": "Una gran semana santa",
            "body": "Ya podemos volver a decir que quedan 356 para la próxima, gran cantidad de vivencias y emociones observando las imágenes",
            "comments": [
                {
                    "username": "antonio-fernandez",
                    "comment": "Y sobretodo ese olor a incienso, que maravilla",
                    "publication_date": "2022-05-01T09:13:51.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-05-02T16:51:11.900Z",
            "type": "post",
            "theme": "Moda",
            "username": "villael",
            "title": "Tendencias 2022",
            "body": "Las expertas en moda dan un giro al sastre clásico tiñéndolo de colores vibrantes y llamativos. Naranja, verde esmeralda, fucsia... Esta primavera-verano el traje de chaqueta es todo menos discreto. ¿Qué os parece?",
            "comments": [
                {
                    "username": "antonio-fernandez",
                    "comment": "Yo tengo unas ganas de que haga mejor tiempo para poder estrenar las mías... Aquí en el norte está complicado",
                    "publication_date": "2022-05-02T17:13:51.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-05-01T23:02:11.900Z",
            "type": "post",
            "theme": "Motivación",
            "username": "lumier",
            "title": "Sobre la vida",
            "body": "Pues como lo leeis, justo hoy ha sido uno de esos días en los que sonries y te sientes afortunado por estar rodeado de las personas más cercanas. ¿Qué os parece?",
            "comments": [
                {
                    "username": "antonio-fernandez",
                    "comment": "Que profundo te veo hoy jajajajaaja",
                    "publication_date": "2022-05-02T17:13:51.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-04-29T15:02:12.900Z",
            "type": "post",
            "theme": "Música",
            "username": "paula_gomez",
            "title": "Festival de música",
            "body": "Buenas, estoy pensando en algún festival de música urbana para un regalo por Comunidad Valenciana. alguna recomendacion???",
            "comments": [
                {
                    "username": "marioRosi",
                    "comment": "Por alicante se montan unos buenos, no sé si era el Almoradi",
                    "publication_date": "2022-05-02T17:13:51.900Z"
                },
                {
                    "username": "jmm00",
                    "comment": "Siiii, el almoradi está muy bien, también está el Hadoop",
                    "publication_date": "2022-05-03T17:13:51.900Z"
                },
                {
                    "username": "paula_gomez",
                    "comment": "Al final he encontrado entradas para el Hadoop, muchas gracias de todas formas marioRosi",
                    "publication_date": "2022-05-03T19:13:51.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-05-04T16:02:12.900Z",
            "type": "post",
            "theme": "Música",
            "username": "pilarGe",
            "title": "Nuevo albúm de Kendrick Lamar",
            "body": "Que ganas de escuchar lo nuevo de Kendrik, se sabe si hay alguna colaboración así interesante??",
            "comments": [
                {
                    "username": "julin",
                    "comment": "Creo que se decía que iba a cantar alguna con The Weeknd",
                    "publication_date": "2022-05-02T17:13:51.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-05-07T21:07:13.900Z",
            "type": "post",
            "theme": "Ciencia",
            "username": "quantumFracture",
            "title": "Vídeo sobre descubrimientos cientificos",
            "body": "He subido un nuevo video a mi canal de Youtube con los nuevos descubrimientos hechos en Marte. Espero que os guste!!!",
            "comments": [
                {
                    "username": "julin",
                    "comment": "Llevaba esperando vídeo un montón de tiempo, ahora estoy muy contento",
                    "publication_date": "2022-05-08T17:13:51.900Z"
                }
            ]
        },
        {
            "publication_date": "2022-05-08T18:22:13.900Z",
            "type": "post",
            "theme": "Tecnología",
            "username": "elonery",
            "title": "Nuevas baterías",
            "body": "Se ha descubierto un nuevo material con el que hacer baterías que serán más económicas y se podrán usar en el hogar. ¿Qué os parece?",
            "comments": []
        },
        {
            "publication_date": "2022-05-03T18:25:13.900Z",
            "type": "post",
            "theme": "Cultura",
            "username": "elonery",
            "title": "Carnavales de cádiz",
            "body": "Se abre el plazo de inscripciones para los carnavales de cádiz. Ya hemos reunido a 23 personas para formar una agrupación. Se aceptan miembros hasta el día 15 de junio. Para más información, puedes consultar el siguiente enlace: https://www.cadizcarnaval.com/",
            "comments": [
                {
                    "username": "julin",
                    "comment": "Yo me acabo de apuntar, tengo que recibir algún correo de confirmación¿?",
                    "publication_date": "2022-05-03T19:13:51.900Z"
                }
            ]
        },
        {
            "type": "theme",
            "title": "Ciencia",
            "description": "Descubrimientos científicos y debates sobre ellos"
        },
        {
            "type": "theme",
            "title": "Moda",
            "description": "Tendencias de la moda"
        },
        {
            "type": "theme",
            "title": "Actualidad",
            "description": "Noticias actuales"
        },
        {
            "type": "theme",
            "title": "Motivación",
            "description": "Por qué vivir en la Comunidad Valenciana"
        },
        {
            "type": "theme",
            "title": "Música",
            "description": "Nuevos estilos de música"
        },
        {
            "type": "theme",
            "title": "Deportes",
            "description": "Noticias de los deportes"
        },
        {
            "type": "theme",
            "title": "Cultura",
            "description": "Noticias de la cultura"
        },
        {
            "type": "theme",
            "title": "Tecnología",
            "description": "Noticias de tecnología"
        },
        {
            "_id": "_design/post",
            "validate_doc_update": "function (e,t,n,r){function i(t,n){if(n=n||'Document must have a '+t,!e[t])throw{forbidden:n}}if('post'===e.type){if(i('title'),i('theme'),i('body'),i('publication_date'),i('username'),i('comments'),'string'!=typeof e.title)throw{forbidden:'Title must be a string'};if(e.title.length>40)throw{forbidden:'Title must be under 40 characters'};if('string'!=typeof e.theme)throw{forbidden:'Theme must be a string'};if('string'!=typeof e.body)throw{forbidden:'Body must be a string'};if(e.body.length>500)throw{forbidden:'Body must be under 500 characters'};if('string'!=typeof e.username)throw{forbidden:'Username must be a string'};if(e.username.length>40)throw{forbidden:'Username must be under 40 characters'};if('string'!=typeof e.publication_date&&isNaN(new Date(e.publication_date))||!0!==/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/.test(e.publication_date))throw{forbidden:'Publication date must be a date representative string in ISO format'};if(!Array.isArray(e.comments))throw{forbidden:'Comments must be an array'};for(let t of e.comments){if(!t.username)throw{forbidden:'All comments must have username'};if(!t.publication_date)throw{forbidden:'All comments must have publication date'};if(!t.comment)throw{forbidden:'All comments must have an text'};if('string'!=typeof t.username)throw{forbidden:'Username for a comment must be a string'};if(t.username.length>40)throw{forbidden:'Username for a comment must be under 40 characters'};if('string'!=typeof t.comment)throw{forbidden:'All comments must be strings'};if(t.comment.length>500)throw{forbidden:'All comments must be under 500 characters'};if('string'!=typeof t.publication_date&&isNaN(new Date(t.publication_date))||!0!==/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/.test(t.publication_date))throw{forbidden:'Publication date of comments must be a date representative string in ISO format'}}}}",
            "views": {
                "by_date": {
                    "map": "t => { 'post' === t.type && emit(t.publication_date, { title: t.title, username: t.username }) };"
                },
                "by_theme": {
                    "map": "t => { 'post' === t.type && emit(t.theme, { title: t.title, publication_date: t.publication_date, username: t.username }) };",
                    "reduce": "(k, v, r) => v.flat();"
                }
            },
            "updates": {
                "updateComments": "function(doc,req) { if (doc['type'] === 'post') { doc['comments'].push(JSON.parse(req.body)); return [doc, 'Post updated'];}return [null, 'Nothing updated']; }"
            },
            "language": "javascript"
        },
        {
            "_id": "_design/theme",
            "validate_doc_update": "function (newDoc,oldDoc,userCtx,secObj){function n(e,i){if(i=i||'Document must have a '+e,!newDoc[e])throw{forbidden:i}}if('theme'===newDoc.type){if(n('title'),n('description'),!newDoc.description)throw{forbidden:'Theme must have a description'};if('string'!=typeof newDoc.title)throw{forbidden:'Title must be a string'};if(newDoc.title.length>40)throw{forbidden:'Title must be under 40 characters'};if('string'!=typeof newDoc.description)throw{forbidden:'Description must be a string'};if(newDoc.description.length>150)throw{forbidden:'Description must be under 150 characters'}}}",
            "views": {
                "themes": {
                    "map": "e => { 'theme' === e.type ? emit(e.title, 0) : 'post' === e.type && emit(e.theme, 1) };",
                    "reduce": "_sum"
                }
            },
            "language": "javascript"
        },
        {
            "_id": "_design/search",
            "views": {},
            "language": "javascript",
            "indexes": {
                "post": {
                    "analyzer": {
                        "name": "perfield",
                        "default": "spanish",
                        "fields": {
                            "publication_date": "keyword",
                            "username": "keyword"
                        }
                    },
                    "index": "t => { index('default', t._id), 'post' === t.type && (index('title', t.title, { store: !0 }), index('body', t.body, { store: !0 }), index('username', t.username, { store: !0 }), index('publication_date', t.publication_date, { store: !0 })) };"
                }
            }
        }
    ]
}